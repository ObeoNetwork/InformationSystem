__Copyright (c) 2008, 2023 Obeo -  All rights reserved. This program and the accompanying materials are made available under the terms of the Eclipse Public License v1.0__

h1. ISD - Entity Designer

*Entity Designer* permet de modéliser des entités métier.

*Entity Designer* fournit le point de vue _Entity Views_ permettant de :
* Modéliser les entités métier, leur structure et les relations entre elles,
* Organiser ces entités en packages

h2. Création d'un modèle Entity
 
Un assistant permet la création de modèles Entity. Cet assistant est accessible via le menu :

bq. File > New > Other ... > Entity Model (Catégorie IS Designer)

!pics/SafranEntityWizard01.png!

Cet assistant permet de définir 
* le nom du modèle à créer (l'extension du modèle est automatiquement ajoutée à la fin du nom en grisée et en italique s'il n'y a pas d'extension précisée),
* le projet ou répertoire de destination pour cette nouvelle ressource :

!pics/SafranEntityWizard02.png!

Une fois l'assistant validé, le modèle est créé, la représentation _Entity Namespace Hierarchy_ est créée et ouverte afin de commencer l'édition.

!pics/SafranEntityModelCreated.png!

Lorsqu'un modèle entity est créé à l'aide de ce wizard, les points de vues _Entity Views_, _Entity (Safr@n Consolidated view)_ et _Environment View_ sont activés.
Le point de vue _Entity Views_ est décrit dans la section suivante. Le point de vue _Entity (Safr@n Consolidated view)_ est décrit dans la section de documentation "Safr@n - Entity (Safr@n consolidated view)":../../org.obeonetwork.is.design.doc/doc/Safr@n%20-%20Entity%20(Safr@n%20consolidated%20view).html. Le point de vue _Environment View_ permet d'activer les vues propriétés EEF.

h2. Point de vue Entity Views

L'outillage Entity Designer fournit un point de vue dédié à la gestion des entités métier. Ce point de vue permet de visualiser et modifier un modèle Entity via plusieurs types de diagrammes.

h3. Ouverture d'une session et activation du point de vue Entity Views

L'ouverture d'une session de travail sur un modèle Entity se fait de manière classique :
* En ouvrant le _Modeling Project_ contenant le modèle
* En double-cliquant sur un fichier _*.aird_ existant
* En faisant un glisser/déposer d'un fichier _*.entity_ sur la vue _Model Explorer_
* En convertissant le projet contenant le modèle en un _Modeling Project_

Le point de vue _Entity Views_ doit être sélectionné sur la session ouverte. Pour vérifier si c'est bien le cas lancer le menu suivant la session :

bq. Viewpoint Selection

Choisir le point de vue _Entity Views_ :

!pics/EntityViewsViewpointSelection.png!

Une fois le point de vue activé, il devient possible de créer ou visualiser les diagrammes Entity Views.

h3. Création/ouverture de diagrammes

Chaque type de diagramme est rattaché à un concept Entity précis. Par exemple, un _Entities Diagram_ est rattaché à un _Namespace_. 

Pour créer un diagramme d'un certain type, il suffit de sélectionner l'élément du modèle auquel on veut rattacher le diagramme dans la vue _Model Explorer_ puis, avec un clic droit, de sélectionner le menu :

bq. New... > #Nom du diagramme#

puis renseigner le nom du diagramme et, enfin, valider.

Par exemple sur un objet racine _Entities_, deux types de représentation peuvent être créés comme présenté sur la capture d'écran suivante :
 
!pics/EntityRepresentationsOnEntities.png!

Pour ouvrir un diagramme il suffit de double-cliquer sur le diagramme dans la vue _Model Explorer_. Attention seuls les diagrammes correspondants aux points de vue sélectionnés sur la session sont affichés dans la vue _Model Explorer_. 

h3. Entities Namespaces Hierarchy (pour l'objet racine _Entities_)

Les entités (_Entity_) sont organisées en packages (_Namespaces_).
La gestion de la hiérarchie de packages se fait en utilisant le diagramme _Entities Namespaces Hierarchy_.
Ce diagramme peut être créé sur l'objet racine _Entities_.

Ce diagramme permet de créer, modifier ou supprimer des packages ainsi que d'accéder facilement au diagramme de gestion des entités d'un package.

!{width:100%}pics/hierarchy/namespaces_hierarchy.png!

h4. Eléments affichés et palette d'outils

Les éléments suivants sont affichés sur le diagramme :

* _Namespace_ : chaque package contenu dans l'élément racine est affiché. Si un package est contenu par un autre package il apparaît à l'intérieur de son package parent. L'icône d'un package apparaît blanche ou grisée selon si le package est respectivement vide ou non.
* _Dépendance_ : l'affichage des dépendances peut être activé ou désactivé via le layer _Dependencies_. Les dépendances entre _Namespaces_ sont représentées par des liens pouvant être fléchés à une ou deux extrémités. Les dépendances sont calculées à partir du contenu de chacun des _Namespace_. Une dépendance est identifiée entre deux _Namespaces_ si il existe un lien d'héritage, une référence ou l'utilisation d'une _Enumeration_ pour typer un attribut entre une _Entity_ d'un _Namespace_ et un autre. Si il est non nul, le nombre de dépendances identifiées est indiqué sur l'extrémité du lien correspondant, et cette extrémité est décoré d'une flèche. Les dépendances entre les packages d'une même lignée de contenance ne sont pas affichées. L'affichage des dépendances peut être activé ou désactivé via le layer _Dependencies_. Les namespaces dits "externes" sont également affichés dans ce layer. Un namespace externe est un namespace contenant une entité externe liée à une entité présente dans un namespace affiché par le diagramme (voir _External entity_ dans la section _Diagramme des entités_ ci-après).

!{width:100%}pics/hierarchy/namespaces_hierarchy_dependencies.png!

Les outils fournis par la palette sont :

| !pics/hierarchy/Create%20namespace.png! | Création d'un package. Un package peut être créé sur le fond du diagramme ou à l'intérieur d'un autre package. |

h4. Navigation vers d'autres diagrammes

Il est possible de naviguer depuis ce diagramme vers un autre diagramme :

* Depuis un package, un double-clic, le menu _New_ ou le menu _Open_ permettent de naviguer (et potentiellement de le créer) vers le diagramme des entités de ce package.

h3. Diagramme des entités

Un diagramme des entités (_Entities Diagram_) est associé à un package (_Namespace_). Il permet de gérer les entités du package.

!{width:100%}pics/entities/Entities_diagram.png!

Les éléments suivants sont affichés sur le diagramme :

* Entités
* Attributs
* Relations entre entités
* Liens d'héritage
* Enumération
* Packages contenus

Les outils fournis par la palette sont :

| !pics/entities/Create%20namespace.png! | Création d'un sous-package. |
| !pics/entities/Create%20entity.png! | Création d'une entité. |
| !pics/entities/Create%20entity%20from%20dto.png! | Création d'entités à partir de DTO. |
| !pics/entities/Create%20attribute.png! | Création d'un attribut d'entité. |
| !pics/entities/Create%20enumeration.png! | Création d'une énumération. |
| !pics/entities/Create%20literal.png! | Création d'une valeur d'énumération. |
| !pics/entities/Create%20relation.png! | Création d'une relation simple. |
| !pics/entities/Create%20composition.png! | Création d'une relation de composition. |
| !pics/entities/Create%20inheritance.png! | Création d'un lien d'héritage. |
| !pics/entities/Create%20bidi%20relation.png! | Création d'une relation simple bidirectionnelle. |
| !pics/entities/Create%20bidi%20composition.png! | Création d'une relation de contenance bidirectionnelle. |
| !pics/entities/Create%20external.png! | Ajout d'une entité externe. Cet outil permet de faire apparaitre une entité définie dans un autre package pour créer des relations avec les entités du package courant. Cet outil est activable via le calque _External Entities_ |

L'outil de création d'entités à partir de DTOs permet de sélectionner des DTOs (cf. documentation sur *SOA Designer*) et des références entre ces DTOs. Des entités et des relations sont créées pour chaque DTO et chaque référence sélectionné.

!pics/entities/Dlg%20entity%20from%20dto.png!

h3. Table des entités

La table des entités (_Entity table_) peut être créée sur l'objet racine _Entities_.

La table des entités permet de lister les entités existantes et d'afficher les informations suivantes :
* Nombre d'attributs définis
* Volumétrie estimée. Cette valeur est modifiable en éditant directement la cellule.
* Historisation (oui/non). Cette valeur est modifiable en éditant directement la cellule.

!pics/table/Entity%20table.png!

h2. Gestion des exigences

La gestion des exigences pour un modèle Entity utilise le mécanisme transverse de gestion des exigences fourni par l'outillage.
Se référer à la documentation *Obeo Network - Requirements Tooling* dans l'aide d'Eclipse.

h2. Gestion de la documentation liée

Il est possible d'attacher de la documentation aux éléments d'un modèle Entity. Le mécanisme utilisé est le mécanisme transverse de gestion de la documentation fourni par l'outillage.
Se référer à la documentation *Obeo Network - Documentation Tooling* dans l'aide d'Eclipse.

h2. Création de diagramme d'interaction

Il est possible de créer des diagrammes d'interaction pour les éléments d'un modèle Entity.
Se reférer à la documentation *Obeo Network - Interaction Tooling* dans l'aide d'Eclipse.

h2. Création de diagramme de machines à états

Il est possible de créer des diagrammes de machines à états pour les éléments d'un modèle Entity.
Se reférer à la documentation *Obeo Network - State Machine Tooling* dans l'aide d'Eclipse.
